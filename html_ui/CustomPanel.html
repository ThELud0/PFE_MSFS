<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/SCSS/common.css" />
    <link rel="stylesheet" href="CustomPanel.css" />
    <link rel="stylesheet" href="./PFE_MSFS-main/styles.css" />
    <script type="text/javascript" src="/JS/coherent.js"></script>
    <script type="text/javascript" src="/JS/common.js"></script>
    <script type="text/javascript" src="/JS/simvar.js"></script>
    <script type="text/javascript" src="/JS/dataStorage.js"></script>
    <script type="text/javascript" src="/JS/buttons.js"></script>
    <script type="text/javascript" src="/JS/Services/ToolBarPanels.js"></script>
    <script type="text/javascript" src="/Pages/VCockpit/Instruments/Shared/BaseInstrument.js"></script>

    <link rel="import" href="/templates/NewPushButton/NewPushButton.html" />
    <link rel="import" href="/templates/ToggleButton/toggleButton.html" />
    <link rel="import" href="/templates/tabMenu/tabMenu.html" />
    <link rel="import" href="/templates/ingameUi/ingameUi.html" />
    <link rel="import" href="/templates/ingameUiHeader/ingameUiHeader.html" />
    <link rel="import" href="/templates/NewListButton/NewListButton.html" />

</head>

<body class="border-box">
    <ingamepanel-custom>
        <ingame-ui id="CustomPanel" panel-id="PANEL_CUSTOM_PANEL" title="" class="ingameUiFrame panelInvisible"
            content-fit="true" min-width="160" min-height="140" width="520" height="500">
            <div id="CustomPanelWrap">
                <iframe id="CustomPanelIframe" src="./PFE_MSFS-main/index.html"></iframe>
            </div>
        </ingame-ui>
    </ingamepanel-custom>

    <script>
        // Set latitude and longitude values
        function setPlanePosition(latitude, longitude) {
            try {
                // Set latitude
                SimVar.SetSimVarValue("PLANE LATITUDE", "degrees", parseFloat(latitude))
                    .then((result) => {
                        console.log(`Latitude set to ${latitude}:`, result);
                    })
                    .catch((err) => console.error("Error setting latitude:", err));

                // Set longitude
                SimVar.SetSimVarValue("PLANE LONGITUDE", "degrees", parseFloat(longitude))
                    .then((result) => {
                        console.log(`Longitude set to ${longitude}:`, result);
                    })
                    .catch((err) => console.error("Error setting longitude:", err));
            } catch (error) {
                console.error("SimVar error:", error);
            }
        }

        function checkIfInVR() {
            try {
                // Get variable state
                const isInVr = SimVar.GetSimVarValue("IS IN VR", "Boolean");
                if (isInVr == 0)
                    document.getElementById('CustomPanelIframe').contentWindow.setIsInVR(false);
                else 
                    document.getElementById('CustomPanelIframe').contentWindow.setIsInVR(true);

            } catch (error) {
                console.error("SimVar error:", error);
            }
        }
/*
        function updateBackgroundColor(){
            $('#CustomPanelIframe').contents().find('body #popup-container .popup-box').css('border', 'solid red 1px');
        }
*/
    </script>

</body>

</html>